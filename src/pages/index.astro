---
import BaseLayout from "../layouts/BaseLayout.astro";
import MainHeader from "../components/MainHeader.jsx";
import Listing from "../components/Listing.jsx";
import metadata from "../data/metadata.json";

let work = await Astro.fetchContent("./work/*.md");
work = work.sort(
  (a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf()
);

let projects = await Astro.fetchContent("./projects/*.md");
projects = projects.sort(
  (a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf()
);

let notes = await Astro.fetchContent("./notes/*.md");
notes = notes.sort(
  (a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf()
);
---

<BaseLayout>
  <MainHeader
    slot="header"
    title={metadata.title}
    description={metadata.description}
    showAboutLink={true}
  />
  <div class="flex flex-col gap-12">
    <Listing title={"Work"} items={work} />
    <Listing title={"Play"} items={projects} />
    <Listing title={"Notes"} items={notes} />
  </div>
</BaseLayout>
