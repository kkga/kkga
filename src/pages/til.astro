---
import PostLayout from "../layouts/PostLayout.astro";
import { Markdown } from "astro/components";
import { formatDateFull } from "../utils.js";

let tilNotes = await Astro.fetchContent("./til/*.md");
tilNotes = tilNotes.sort(
  (a, b) => new Date(b.date).valueOf() - new Date(a.date).valueOf()
);

const title = "TIL";
const description = "random everyday things i don't want to forget";
---

<PostLayout content={{ title, description }}>
  <div class="flex flex-col gap-12">
    {tilNotes.map((note) => {
      return (
        <div key={note.url}>
          <div class="flex italic text-gray-500 dark:text-gray-400">
            <time class="italic text-gray-500" dateTime={note.date}>
              {formatDateFull(note.date)}
            </time>
            {note.tags && (
              <span>&nbsp;&middot;&nbsp;</span>
              <ul class="inline-flex gap-2 m-0 list-none">
                {note.tags.map((tag) => {
                  return (
                    <li key={tag} class="m-0 inline">
                      {" "}
                      #{tag}{" "}
                    </li>
                  );
                })}
              </ul>
            )}
          </div>
          <h3 class="mt-0 mb-4">
            <a class="text-current" href={note.url}>
              {note.title}
            </a>
          </h3>

          <Markdown content={note.content.source} />
        </div>
      );
    })}
  </div>
</PostLayout>
