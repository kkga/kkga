---
interface Props {
  src?: string;
  sources?: Array<{
    src: string;
    type?: string; // e.g., "video/webm", "video/mp4"
  }>;
  poster?: string;
  autoplay?: boolean;
  controls?: boolean;
  loop?: boolean;
  muted?: boolean;
  preload?: "none" | "metadata" | "auto";
  className: string;
}

const {
  src,
  sources = [],
  poster,
  className,
  autoplay = true,
  controls = false,
  loop = true,
  muted = true,
  preload = "metadata",
} = Astro.props;
---

<video
  playsinline
  autoplay={autoplay}
  controls={controls}
  loop={loop}
  muted={muted}
  preload={preload}
  poster={poster}
  class={`w-full bg-panel ${className || ""}`}
>
  {
    sources && sources.length > 0
      ? sources.map((s) => <source src={s.src} type={s.type} />)
      : src && <source src={src} />
  }
</video>
